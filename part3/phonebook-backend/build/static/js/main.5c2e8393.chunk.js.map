{"version":3,"sources":["components/Notification.js","components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Notification","message","className","type","msg","Filter","filter","filterChange","value","onChange","PersonForm","nameVal","numberVal","nameChange","numberChange","newPerson","onSubmit","Persons","filtered","deletePerson","map","person","key","name","number","onClick","baseUrl","axios","get","data","post","put","id","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setNewFilter","setMessage","useEffect","personsService","then","res","filterPersons","toLocaleLowerCase","indexOf","e","target","preventDefault","find","trim","window","confirm","record","concat","catch","setTimeout","err","response","error","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5c2e8393.chunk.js","sourcesContent":["import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return <div className={message.type}>{message.msg}</div>\n}\n\nexport default Notification","import React from 'react'\n\nconst Filter = ({filter, filterChange}) => {\n  return (\n    <div>\n      filter shown with <input value={filter} onChange={filterChange} />\n    </div>\n  )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = ({\n  nameVal,\n  numberVal,\n  nameChange,\n  numberChange,\n  newPerson,\n}) => {\n  return (\n    <form onSubmit={newPerson}>\n      <div>\n        name: <input value={nameVal} onChange={nameChange} />\n      </div>\n      <div>\n        number: <input value={numberVal} onChange={numberChange} /> (format: XXX-XXX-XXXX)\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({ filtered, deletePerson }) => {\n  return (\n    <div>\n      {filtered.map((person) => (\n        <p key={person.name}>\n          {person.name} {person.number}\n          <button onClick={deletePerson(person)}>delete</button>\n        </p>\n      ))}\n    </div>\n  )\n}\n\nexport default Persons","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst createPerson = (data) => {\n  return axios.post(baseUrl, data)\n}\n\nconst updatePerson = (data) => {\n  return axios.put(`${baseUrl}/${data.id}`, data)\n}\n\nconst deletePerson = (data) => {\n  return axios.delete(`${baseUrl}/${data}`)\n}\n\nexport default {\n  getAll,\n  createPerson,\n  updatePerson,\n  deletePerson,\n}\n","import React, { useState, useEffect } from 'react'\nimport Notification from './components/Notification'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personsService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setNewFilter] = useState('')\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    personsService.getAll().then(res => {\n      setPersons(res.data)\n    })\n  }, [])\n\n  const createOrModify = (e) => {\n    e.preventDefault()\n\n    const personExist = persons.find(\n        (person) =>\n          person.name.toLocaleLowerCase() === newName.trim().toLocaleLowerCase()\n      )\n\n    if (personExist) {\n      const message = `${newName.trim()} is already added to phonebook, replace the old number with a new one?`\n      if (window.confirm(message)) {\n        let record = persons.filter((person) => person.name === newName)\n        record = { ...record[0], number: newNumber }\n\n        personsService.updatePerson(record).then(() => {\n          setPersons(\n            persons.filter((person) => person.name !== newName).concat(record)\n          )\n          setNewName('')\n          setNewNumber('')\n        }).catch(() => {\n          setMessage({\n            type: 'error',\n            msg: `Information of ${record.name} has already been removed from server`,\n          })\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        })\n      }\n    } else {\n      const person = { name: newName, number: newNumber }\n      personsService.createPerson(person).then((res) => {\n        setMessage({ type: 'success', msg: `Added ${res.data.name}` })\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000)\n        setPersons(persons.concat(res.data))\n        setNewName('')\n        setNewNumber('')\n      }).catch((err) => {\n        setMessage({\n          type: 'error',\n          msg: err.response.data.error,\n        })\n        setTimeout(() => {\n          setMessage(null)\n        }, 3000)\n      })\n    }\n  }\n\n  const deletePerson = (data) => () => {\n    if (window.confirm(`Delete ${data.name} ?`)) {\n      personsService\n        .deletePerson(data.id)\n        .then((res) => {\n          console.log(res)\n          setPersons(persons.filter((person) => person.id !== data.id))\n        })\n        .catch((err) => {\n          setMessage({\n            type: 'error',\n            msg: err.response.data.error,\n          })\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        })\n    }\n  }\n\n  const filterPersons = filter\n    ? persons.filter(person => person.name.toLocaleLowerCase().indexOf(filter.toLocaleLowerCase()) !== -1)\n    : persons\n\n  const handleFilterChange = (e) => {\n    setNewFilter(e.target.value)\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter filter={filter} filterChange={handleFilterChange} />\n      <h3>Add a new</h3>\n      <PersonForm\n        nameVal={newName}\n        numberVal={newNumber}\n        nameChange={handleNameChange}\n        numberChange={handleNumberChange}\n        newPerson={createOrModify}\n      />\n      <h3>Numbers</h3>\n      <Persons filtered={filterPersons} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render( <App />, document.getElementById('root'))"],"sourceRoot":""}